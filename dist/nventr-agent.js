function init(){let r=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),s=document.createElement("iframe"),d=document,c=448,p=352,u=36,e="NONE",h="COLLAPSED",t="FULLSCREEN",i=[],w={rendered:!1,onRendered:null,onAction:null,onActions:null,actionsAccessToken:null};window.addEventListener("message",function(e){if(e&&e.data&&"nventr-agent"===e.data.source){let t=e=>({name:e.name,value:e.value?JSON.parse(e.value):null});let n=(t,n)=>{i.forEach(e=>{e.name===t&&e.callback(n)}),w.onAction&&w.onAction(t,n)};switch(e.data.type){case"action":if(!e.data.payload||!e.data.payload.name)return!1;var o=t(e.data.payload);n(o.name,o.value);break;case"actions":if(!e.data.payload||!e.data.payload.length)return!1;o=e.data.payload.map(e=>t(e)).filter(e=>e&&e.name);if(!o.length)return!1;w.onActions&&w.onActions(o),o.forEach(({name:e,value:t})=>{n(e,t)});break;case"rendered":w.rendered=!0,w.onRenderedCallback&&w.onRenderedCallback(),w.actionsAccessToken&&x(w.actionsAccessToken),C()}}});let v={windowState:e},m=(t,n)=>Object.keys(n).forEach(e=>t.style[e]=n[e]),g=e=>{e.preventDefault(),e.stopPropagation()},y=e=>{if(v.windowState!==t){g(e);let o=e.clientX,a=e.clientY,i=v.windowState===h?u:c,t=(s.style.pointerEvents="none",l.onmousedown=null,e=>{g(e);let t=r.offsetTop-(a-e.clientY),n=r.offsetLeft-(o-e.clientX);o=e.clientX,a=e.clientY,t<0&&(t=0),(n=n<0?0:n)+p>window.innerWidth&&(n=window.innerWidth-p),t+i>window.innerHeight&&(t=window.innerHeight-i),r.style.top=t+"px",r.style.left=n+"px"}),n=e=>{g(e),d.removeEventListener("mouseup",n),d.removeEventListener("mousemove",t),d.removeEventListener("mouseleave",n),l.onmousedown=y,s.style.pointerEvents="auto"};d.addEventListener("mouseup",n),d.addEventListener("mousemove",t),d.addEventListener("mouseleave",n),e.preventDefault}},A=()=>{r.style.height=u+"px",r.style.width=p+"px",r.style.top=null,r.style.left=null,r.style.bottom="16px",r.style.right="16px",b(h)},n=()=>{r.style.height=c+"px",r.style.width=p+"px",r.style.top=null,r.style.left=null,r.style.bottom="16px",r.style.right="16px",b(e)},f=()=>{r.style.width="auto",r.style.height="auto",r.style.width="auto",r.style.height="auto",r.style.top="32px",r.style.left="32px",r.style.bottom="32px",r.style.right="32px",b(t)},x=e=>{w.actionsAccessToken=e,w.rendered&&s.contentWindow.postMessage({source:"nventr-agent",type:"actionsAccessToken",payload:e},"*")},b=e=>{v.windowState=e,s.contentWindow.postMessage({type:"windowState",payload:e},"*")},k=()=>{v.windowState=v.windowState===h?e:h,(v.windowState===h?A:n)()},E=()=>{v.windowState=v.windowState===t?e:t,(v.windowState===t?f:n)()},S=()=>{r.getAnimations().forEach(e=>e.cancel()),r.remove(),w.rendered=!1},C=()=>{r.animate([{opacity:0},{opacity:1}],{duration:800,easing:"linear",fill:"forwards"})};var L=()=>{var e=document.getElementById("nventr-agent");if(!e)return{};let a=new URL(e.src);e=(e,t)=>{let n=!1;if(a.searchParams.has(e)){var o=a.searchParams.get(e);switch(o){case"":case"1":case"true":n=!0;break;case"false":case"0":n=!1;break;default:null===t&&(n=o)}""===a.searchParams.get(e)&&(n=!0)}else n=t;return n};return{id:e("id",null),dev:e("dev",!1),fullscreen:e("fullscreen",!1),collapse:e("collapse",!1),render:e("render",!0)}};let R=(e={})=>{var t=e.dev||!1,n=e.id||e.agentAccessKey;return n?(S(),e.onRendered&&(w.onRenderedCallback=e.onRendered),e.actionsAccessToken&&(w.actionsAccessToken=e.actionsAccessToken),e.onAction&&(w.onAction=e.onAction),e.onActions&&(w.onActions=e.onActions),r.id="nventrAgentWrapper",m(r,T.wrapper),m(l,T.handle),l.onmousedown=y,m(o,T.collapseButton),o.onclick=k,m(a,T.fullscreenButton),a.onclick=E,m(s,T.iframe),s.src=t?"https://dev-agent.inventr.ai?agentAccessKey="+n:"https://agent.inventr.ai?agentAccessKey="+n,s.allow="microphone",r.appendChild(s),r.appendChild(l),r.appendChild(o),r.appendChild(a),document.body.appendChild(r),!0===e.collapse?A():!0===e.fullscreen&&f(),!0):(console.warn("Nventr Agent warning. No agent access key provided. Please add the id parameter or use nventrAgent.render({ id: [AGENT ACCESS KEY] })."),!1)},T={wrapper:{height:c+"px",width:p+"px",backgroundColor:"rgba(0, 0, 0, 0)",position:"fixed",bottom:"16px",right:"16px",zIndex:"10",opacity:"0",boxShadow:"0px 1px 10px 1px rgba(0, 0, 0, .2)",borderRadius:"4px",overflow:"hidden"},handle:{cursor:"grab",position:"absolute",top:"0px",height:"32px",opacity:"0",width:p-64+"px"},collapseButton:{cursor:"pointer",position:"absolute",top:"0px",right:"32px",height:"32px",width:"32px",opacity:"0"},fullscreenButton:{cursor:"pointer",position:"absolute",top:"0px",right:"0px",height:"32px",width:"32px",opacity:"0"},iframe:{position:"absolute",height:"100%",width:"100%",top:"0px",right:"0px",bottom:"0px",left:"0px",borderRadius:"4px",overflow:"hidden"}};return L().render&&R(L()),{render:e=>{R(e)},setActionsAccessToken:e=>x(e),removeActionsAccessToken:()=>x(null),addActionListener:(e,t)=>{let n={name:e,callback:t};return i.push(n),{remove:()=>{var e=i.indexOf(n);i.splice(e,1)}}},onAction:e=>{w.onAction=e},onActions:e=>{w.onActions=e},onRendered:e=>{w.onRenderedCallback=e,w.rendered&&w.onRenderedCallback()},restore:()=>n(),collapse:()=>A(),fullscreen:()=>f(),remove:()=>S()}}let nventrAgent=window.nventrAgent||init();window.nventrAgent=nventrAgent;export default window.inventrAgent=nventrAgent;