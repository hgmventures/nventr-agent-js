function init(){let l=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),s=document.createElement("iframe"),d=document,c=448,p=352,u=36,e="NONE",h="COLLAPSED",t="FULLSCREEN",r=[],w={rendered:!1,onRendered:null,onAction:null,onActions:null,webhookAccessToken:null};window.addEventListener("message",function(e){if(e&&e.data&&"nventr-agent"===e.data.source){let t=e=>({name:e.name,value:e.value?JSON.parse(e.value):null});let n=(t,n)=>{r.forEach(e=>{e.name===t&&e.callback(n)}),w.onAction&&w.onAction(t,n)};switch(e.data.type){case"action":if(!e.data.payload||!e.data.payload.name)return!1;var o=t(e.data.payload);n(o.name,o.value);break;case"actions":if(!e.data.payload||!e.data.payload.length)return!1;o=e.data.payload.map(e=>t(e)).filter(e=>e&&e.name);if(!o.length)return!1;w.onActions&&w.onActions(o),o.forEach(({name:e,value:t})=>{n(e,t)});break;case"rendered":w.rendered=!0,w.onRenderedCallback&&w.onRenderedCallback(),w.webhookAccessToken&&A(w.webhookAccessToken),C()}}});let m={windowState:e},v=(t,n)=>Object.keys(n).forEach(e=>t.style[e]=n[e]),g=e=>{e.preventDefault(),e.stopPropagation()},y=e=>{if(m.windowState!==t){g(e);let o=e.clientX,a=e.clientY,r=m.windowState===h?u:c,t=(s.style.pointerEvents="none",i.onmousedown=null,e=>{g(e);let t=l.offsetTop-(a-e.clientY),n=l.offsetLeft-(o-e.clientX);o=e.clientX,a=e.clientY,t<0&&(t=0),(n=n<0?0:n)+p>window.innerWidth&&(n=window.innerWidth-p),t+r>window.innerHeight&&(t=window.innerHeight-r),l.style.top=t+"px",l.style.left=n+"px"}),n=e=>{g(e),d.removeEventListener("mouseup",n),d.removeEventListener("mousemove",t),d.removeEventListener("mouseleave",n),i.onmousedown=y,s.style.pointerEvents="auto"};d.addEventListener("mouseup",n),d.addEventListener("mousemove",t),d.addEventListener("mouseleave",n),e.preventDefault}},f=()=>{l.style.height=u+"px",l.style.width=p+"px",l.style.top=null,l.style.left=null,l.style.bottom="16px",l.style.right="16px",b(h)},n=()=>{l.style.height=c+"px",l.style.width=p+"px",l.style.top=null,l.style.left=null,l.style.bottom="16px",l.style.right="16px",b(e)},x=()=>{l.style.width="auto",l.style.height="auto",l.style.width="auto",l.style.height="auto",l.style.top="32px",l.style.left="32px",l.style.bottom="32px",l.style.right="32px",b(t)},A=e=>{w.webhookAccessToken=e,w.rendered&&s.contentWindow.postMessage({source:"nventr-agent",type:"webhookAccessToken",payload:e},"*")},b=e=>{m.windowState=e,s.contentWindow.postMessage({type:"windowState",payload:e},"*")},k=()=>{m.windowState=m.windowState===h?e:h,(m.windowState===h?f:n)()},E=()=>{m.windowState=m.windowState===t?e:t,(m.windowState===t?x:n)()},S=()=>{l.getAnimations().forEach(e=>e.cancel()),l.remove(),w.rendered=!1},C=()=>{l.animate([{opacity:0},{opacity:1}],{duration:800,easing:"linear",fill:"forwards"})};var L=()=>{var e=document.getElementById("nventr-agent");if(!e)return{};let a=new URL(e.src);e=(e,t)=>{let n=!1;if(a.searchParams.has(e)){var o=a.searchParams.get(e);switch(o){case"":case"1":case"true":n=!0;break;case"false":case"0":n=!1;break;default:null===t&&(n=o)}""===a.searchParams.get(e)&&(n=!0)}else n=t;return n};return{id:e("id",null),dev:e("dev",!1),fullscreen:e("fullscreen",!1),collapse:e("collapse",!1),render:e("render",!0)}};let R=(e={})=>{var t=e.dev||!1,n=e.id||e.agentAccessKey;return n?(S(),e.onRendered&&(w.onRenderedCallback=e.onRendered),e.webhookAccessToken&&(w.webhookAccessToken=e.webhookAccessToken),e.onAction&&(w.onAction=e.onAction),e.onActions&&(w.onActions=e.onActions),l.id="nventrAgentWrapper",v(l,T.wrapper),v(i,T.handle),i.onmousedown=y,v(o,T.collapseButton),o.onclick=k,v(a,T.fullscreenButton),a.onclick=E,v(s,T.iframe),s.src=t?"https://dev-agent.inventr.ai?agentAccessKey="+n:"https://agent.inventr.ai?agentAccessKey="+n,s.allow="microphone",s.allowusermedia="true",l.appendChild(s),l.appendChild(i),l.appendChild(o),l.appendChild(a),document.body.appendChild(l),!0===e.collapse?f():!0===e.fullscreen&&x(),!0):(console.warn("Nventr Agent warning. No agent access key provided. Please add the id parameter or use nventrAgent.render({ id: [AGENT ACCESS KEY] })."),!1)},T={wrapper:{height:c+"px",width:p+"px",backgroundColor:"rgba(0, 0, 0, 0)",position:"fixed",bottom:"16px",right:"16px",zIndex:"10",opacity:"0",boxShadow:"0px 1px 10px 1px rgba(0, 0, 0, .2)",borderRadius:"4px",overflow:"hidden"},handle:{cursor:"grab",position:"absolute",top:"0px",height:"32px",opacity:"0",width:p-64+"px"},collapseButton:{cursor:"pointer",position:"absolute",top:"0px",right:"32px",height:"32px",width:"32px",opacity:"0"},fullscreenButton:{cursor:"pointer",position:"absolute",top:"0px",right:"0px",height:"32px",width:"32px",opacity:"0"},iframe:{position:"absolute",height:"100%",width:"100%",top:"0px",right:"0px",bottom:"0px",left:"0px",borderRadius:"4px",overflow:"hidden"}};return L().render&&R(L()),{render:e=>{R(e)},setWebhookAccessToken:e=>A(e),removeWebhookAccessToken:()=>A(null),addActionListener:(e,t)=>{let n={name:e,callback:t};return r.push(n),{remove:()=>{var e=r.indexOf(n);r.splice(e,1)}}},onAction:e=>{w.onAction=e},onActions:e=>{w.onActions=e},onRendered:e=>{w.onRenderedCallback=e,w.rendered&&w.onRenderedCallback()},restore:()=>n(),collapse:()=>f(),fullscreen:()=>x(),remove:()=>S()}}let nventrAgent=window.nventrAgent||init();window.nventrAgent=nventrAgent;export default window.inventrAgent=nventrAgent;